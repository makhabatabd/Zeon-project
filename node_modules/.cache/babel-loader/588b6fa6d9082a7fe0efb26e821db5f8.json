{"ast":null,"code":"var _jsxFileName = \"/Users/makhabatabdisattarova/Desktop/ZEON IT HUB/main-project/src/context/favoriteContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const favoriteContext = /*#__PURE__*/React.createContext();\nconst INIT_STATE = {\n  fav: JSON.parse(localStorage.getItem(\"fav\")),\n  favoriteLength: 0\n};\n\nfunction reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INIT_STATE;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"GET_FAV\":\n      return { ...state,\n        fav: action.payload,\n        favoriteLength: action.payload.products.length\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst FavoriteContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n\n  function createFavFromLS() {\n    let fav = JSON.parse(localStorage.getItem(\"fav\"));\n\n    if (!fav) {\n      fav = {\n        products: []\n      };\n      localStorage.setItem(\"fav\", JSON.stringify(fav));\n    }\n\n    return fav;\n  }\n\n  const getFav = () => {\n    let fav = createFavFromLS(); // if (!fav) {\n    //   fav = {\n    //     products: [],\n    //   };\n    // }\n\n    dispatch({\n      type: \"GET_FAV\",\n      payload: fav\n    });\n  };\n\n  const addDelToFav = product => {\n    let fav = createFavFromLS(); // if (!fav) {\n    //   fav = {\n    //     products: [],\n    //   };\n    // }\n\n    let newProd = {\n      item: product\n    };\n    let checkProdInFav = fav.products.some(obj => {\n      return obj.item.id === product.id;\n    });\n\n    if (checkProdInFav) {\n      fav.products = fav.products.filter(obj => {\n        return obj.item.id !== product.id;\n      });\n    } else {\n      fav.products.push(newProd);\n    }\n\n    localStorage.setItem(\"fav\", JSON.stringify(fav));\n    getFav();\n  };\n\n  const isProdInFav = id => {\n    let fav = createFavFromLS(); // if (!fav) {\n    //   fav = {\n    //     products: [],\n    //   };\n    // }\n\n    let exist = fav.products.some(obj => {\n      return obj.item.id === id;\n    });\n    return exist;\n  };\n\n  const deleteProdInFav = id => {\n    let fav = createFavFromLS();\n    fav.products = fav.products.filter(elem => {\n      return elem.item.id !== id;\n    });\n    localStorage.setItem(\"fav\", JSON.stringify(fav));\n    getFav();\n  };\n\n  return /*#__PURE__*/_jsxDEV(favoriteContext.Provider, {\n    value: {\n      fav: state.fav,\n      favoriteLength: state.favoriteLength,\n      addDelToFav,\n      getFav,\n      deleteProdInFav,\n      isProdInFav\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FavoriteContextProvider, \"4m7vccIZ8Keq6ndhHxt+SMfGKKc=\");\n\n_c = FavoriteContextProvider;\nexport default FavoriteContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"FavoriteContextProvider\");","map":{"version":3,"names":["React","useReducer","favoriteContext","createContext","INIT_STATE","fav","JSON","parse","localStorage","getItem","favoriteLength","reducer","state","action","type","payload","products","length","FavoriteContextProvider","children","dispatch","createFavFromLS","setItem","stringify","getFav","addDelToFav","product","newProd","item","checkProdInFav","some","obj","id","filter","push","isProdInFav","exist","deleteProdInFav","elem"],"sources":["/Users/makhabatabdisattarova/Desktop/ZEON IT HUB/main-project/src/context/favoriteContext.js"],"sourcesContent":["import React, { useReducer } from \"react\";\n\nexport const favoriteContext = React.createContext();\n\nconst INIT_STATE = {\n  fav: JSON.parse(localStorage.getItem(\"fav\")),\n  favoriteLength: 0,\n};\nfunction reducer(state = INIT_STATE, action) {\n  switch (action.type) {\n    case \"GET_FAV\":\n      return {\n        ...state,\n        fav: action.payload,\n        favoriteLength: action.payload.products.length,\n      };\n    default:\n      return state;\n  }\n}\n\nconst FavoriteContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n\n  function createFavFromLS() {\n    let fav = JSON.parse(localStorage.getItem(\"fav\"));\n\n    if (!fav) {\n      fav = {\n        products: [],\n      };\n      localStorage.setItem(\"fav\", JSON.stringify(fav));\n    }\n    return fav;\n  }\n\n  const getFav = () => {\n    let fav = createFavFromLS();\n    // if (!fav) {\n    //   fav = {\n    //     products: [],\n    //   };\n    // }\n    dispatch({\n      type: \"GET_FAV\",\n      payload: fav,\n    });\n  };\n  const addDelToFav = (product) => {\n    let fav = createFavFromLS();\n    // if (!fav) {\n    //   fav = {\n    //     products: [],\n    //   };\n    // }\n    let newProd = {\n      item: product,\n    };\n\n    let checkProdInFav = fav.products.some((obj) => {\n      return obj.item.id === product.id;\n    });\n    if (checkProdInFav) {\n      fav.products = fav.products.filter((obj) => {\n        return obj.item.id !== product.id;\n      });\n    } else {\n      fav.products.push(newProd);\n    }\n    localStorage.setItem(\"fav\", JSON.stringify(fav));\n    getFav();\n  };\n\n  const isProdInFav = (id) => {\n    let fav = createFavFromLS();\n    // if (!fav) {\n    //   fav = {\n    //     products: [],\n    //   };\n    // }\n    let exist = fav.products.some((obj) => {\n      return obj.item.id === id;\n    });\n    return exist;\n  };\n\n  const deleteProdInFav = (id) => {\n    let fav = createFavFromLS();\n    fav.products = fav.products.filter((elem) => {\n      return elem.item.id !== id;\n    });\n    localStorage.setItem(\"fav\", JSON.stringify(fav));\n    getFav();\n  };\n\n  return (\n    <favoriteContext.Provider\n      value={{\n        fav: state.fav,\n        favoriteLength: state.favoriteLength,\n        addDelToFav,\n        getFav,\n        deleteProdInFav,\n        isProdInFav,\n      }}\n    >\n      {children}\n    </favoriteContext.Provider>\n  );\n};\n\nexport default FavoriteContextProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}