{"ast":null,"code":"var _jsxFileName = \"/Users/makhabatabdisattarova/Desktop/ZEON IT HUB/main-project/src/context/CartContext.js\",\n    _s = $RefreshSig$();\n\nimport { CountertopsRounded } from \"@mui/icons-material\";\nimport React, { useReducer } from \"react\";\nimport { calcTotalPrice, calcSubPrice } from \"../components/helpers/calcPrice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const cartContext = /*#__PURE__*/React.createContext();\nconst INIT_STATE = {\n  cart: {},\n  cartLength: 0\n};\nlet color = \"#73A39D\";\n\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INIT_STATE;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"GET_CART\":\n      return { ...state,\n        cart: action.payload,\n        cartLength: action.payload.products.length\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst CartContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n\n  function getCart() {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        colors: [],\n        totalPrice: 0\n      };\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n\n    cart.totalPrice = calcTotalPrice(cart.products);\n    dispatch({\n      type: \"GET_CART\",\n      payload: cart\n    });\n  }\n\n  function addProductToCart(product) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0\n      };\n    }\n\n    let newProduct = {\n      item: product,\n      count: 1,\n      subPrice: product.price\n    };\n    let isProductInCart = cart.products.some(item => item.item.id == newProduct.item.id && item.item.color == newProduct.item.color);\n\n    if (isProductInCart) {\n      cart.products = cart.products.filter(item => item.item.id != newProduct.item.id && item.item.color != newProduct.item.color);\n    } else {\n      cart.products.push(newProduct);\n    }\n\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  }\n\n  function changeProductColor(color, id) {\n    if (!color) {\n      color = \"#73A39D\";\n    }\n\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0\n      };\n    }\n\n    cart.products = cart.products.map(item => {\n      if (item.item.id == id) {\n        item.color = color;\n        item.subPrice = calcSubPrice(item);\n      }\n\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function checkItemInCart(id, color) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0\n      };\n    }\n\n    let isProductInCart = cart.products.some(item => item.item.id == id);\n    return isProductInCart;\n  }\n\n  function deleteFromCart(id) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0\n      };\n    }\n\n    cart.products = cart.products.filter(item => item.item.id != id && item.item.count != count);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function changeProductCount(count, id) {\n    if (count <= 0) {\n      count = 1;\n    }\n\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0\n      };\n    }\n\n    cart.products = cart.products.map(item => {\n      if (item.item.id == id) {\n        item.count = count;\n        item.subPrice = calcSubPrice(item);\n      }\n\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  return /*#__PURE__*/_jsxDEV(cartContext.Provider, {\n    value: {\n      cartLength: state.cartLength,\n      cart: state.cart,\n      getCart,\n      addProductToCart,\n      checkItemInCart,\n      deleteFromCart,\n      changeProductCount,\n      changeProductColor\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartContextProvider, \"4m7vccIZ8Keq6ndhHxt+SMfGKKc=\");\n\n_c = CartContextProvider;\nexport default CartContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartContextProvider\");","map":{"version":3,"names":["CountertopsRounded","React","useReducer","calcTotalPrice","calcSubPrice","cartContext","createContext","INIT_STATE","cart","cartLength","color","reducer","state","action","type","payload","products","length","CartContextProvider","children","dispatch","getCart","JSON","parse","localStorage","getItem","colors","totalPrice","setItem","stringify","addProductToCart","product","newProduct","item","count","subPrice","price","isProductInCart","some","id","filter","push","changeProductColor","map","checkItemInCart","deleteFromCart","changeProductCount"],"sources":["/Users/makhabatabdisattarova/Desktop/ZEON IT HUB/main-project/src/context/CartContext.js"],"sourcesContent":["import { CountertopsRounded } from \"@mui/icons-material\";\nimport React, { useReducer } from \"react\";\nimport { calcTotalPrice, calcSubPrice } from \"../components/helpers/calcPrice\";\n\nexport const cartContext = React.createContext();\n\nconst INIT_STATE = {\n  cart: {},\n  cartLength: 0,\n};\n\nlet color = \"#73A39D\";\n\nconst reducer = (state = INIT_STATE, action) => {\n  switch (action.type) {\n    case \"GET_CART\":\n      return {\n        ...state,\n        cart: action.payload,\n        cartLength: action.payload.products.length,\n      };\n    default:\n      return state;\n  }\n};\n\nconst CartContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n  function getCart() {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        colors: [],\n        totalPrice: 0,\n      };\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n    cart.totalPrice = calcTotalPrice(cart.products);\n    dispatch({\n      type: \"GET_CART\",\n      payload: cart,\n    });\n  }\n  function addProductToCart(product) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n      };\n    }\n    let newProduct = {\n      item: product,\n      count: 1,\n      subPrice: product.price,\n    };\n    let isProductInCart = cart.products.some(\n      (item) =>\n        item.item.id == newProduct.item.id &&\n        item.item.color == newProduct.item.color\n    );\n    if (isProductInCart) {\n      cart.products = cart.products.filter(\n        (item) =>\n          item.item.id != newProduct.item.id &&\n          item.item.color != newProduct.item.color\n      );\n    } else {\n      cart.products.push(newProduct);\n    }\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  }\n  function changeProductColor(color, id) {\n    if (!color) {\n      color = \"#73A39D\";\n    }\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n      };\n    }\n    cart.products = cart.products.map((item) => {\n      if (item.item.id == id) {\n        item.color = color;\n        item.subPrice = calcSubPrice(item);\n      }\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function checkItemInCart(id, color) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n      };\n    }\n    let isProductInCart = cart.products.some((item) => item.item.id == id);\n    return isProductInCart;\n  }\n  function deleteFromCart(id) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n      };\n    }\n    cart.products = cart.products.filter(\n      (item) => item.item.id != id && item.item.count != count\n    );\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n  function changeProductCount(count, id) {\n    if (count <= 0) {\n      count = 1;\n    }\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n      };\n    }\n    cart.products = cart.products.map((item) => {\n      if (item.item.id == id) {\n        item.count = count;\n        item.subPrice = calcSubPrice(item);\n      }\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  return (\n    <cartContext.Provider\n      value={{\n        cartLength: state.cartLength,\n        cart: state.cart,\n        getCart,\n        addProductToCart,\n        checkItemInCart,\n        deleteFromCart,\n        changeProductCount,\n        changeProductColor,\n      }}\n    >\n      {children}\n    </cartContext.Provider>\n  );\n};\nexport default CartContextProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}