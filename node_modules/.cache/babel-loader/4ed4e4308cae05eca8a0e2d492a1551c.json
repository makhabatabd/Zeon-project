{"ast":null,"code":"var _jsxFileName = \"/Users/makhabatabdisattarova/Desktop/ZEON IT HUB/main-project/src/context/CartContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer } from \"react\";\nimport { calcTotalPrice, calcSubPrice, calcDiscount, totalCount, calcDisc } from \"../components/helpers/calcPrice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const cartContext = /*#__PURE__*/React.createContext();\nconst INIT_STATE = {\n  cart: {},\n  cartLength: 0\n};\n\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INIT_STATE;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"GET_CART\":\n      return { ...state,\n        cart: action.payload,\n        cartLength: action.payload.products.length\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst CartContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n\n  function getCart() {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0,\n        totalCount: 0\n      };\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n\n    cart.totalPrice = calcTotalPrice(cart.products);\n    cart.cartDiscount = calcDiscount(cart.products);\n    dispatch({\n      type: \"GET_CART\",\n      payload: cart\n    });\n  }\n\n  function addProductToCart(product) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0\n      };\n    }\n\n    let newProduct = {\n      item: product,\n      subPrice: product.price,\n      discount: Math.ceil(product.price - (product.price - product.price * product.discount / 100)),\n      count: 1\n    };\n    let isProductInCart = cart.products.some(item => item.item.color == product.color && item.item.id == product.id);\n\n    if (isProductInCart) {\n      cart.products = cart.products.filter(item => item.item.color != product.color && item.item.id != product.id);\n    } else {\n      cart.products.push(newProduct);\n    }\n\n    cart.totalPrice = calcTotalPrice(cart.products);\n    cart.cartDiscount = calcDiscount(cart.products);\n    cart.totalCount = totalCount(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function checkItemInCart(id, color) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0\n      };\n    }\n\n    let isProductInCart = cart.products.some(item => item.item.id == id && item.item.color == color);\n    return isProductInCart;\n  }\n\n  const isProdInCart = (id, color) => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0\n      };\n    }\n\n    let exist = cart.products.some(obj => {\n      return obj.item.id === id && obj.item.color === color;\n    });\n    return exist;\n  };\n\n  function getColors(id, color) {\n    let array = [];\n    cart.products.some;\n  }\n\n  function deleteFromCart(id, color) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0\n      };\n    }\n\n    const index = cart.products.findIndex(item => item.item.id === id && item.item.color === color);\n    cart.products.splice(index, 1);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function changeProductCount(count, color, id) {\n    if (count <= 0) {\n      count = 1;\n    }\n\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    cart.products = cart.products.map(item => {\n      if (item.item.color === color && item.item.id === id) {\n        item.count = count;\n        item.discount = calcDisc(item);\n        item.subPrice = calcSubPrice(item);\n      }\n\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    cart.cartDiscount = calcDiscount(cart.products);\n    cart.totalCount = totalCount(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function deleteAll() {\n    localStorage.removeItem(\"cart\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(cartContext.Provider, {\n    value: {\n      cartLength: state.cartLength,\n      cart: state.cart,\n      getCart,\n      addProductToCart,\n      checkItemInCart,\n      deleteFromCart,\n      changeProductCount,\n      deleteAll,\n      isProdInCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartContextProvider, \"4m7vccIZ8Keq6ndhHxt+SMfGKKc=\");\n\n_c = CartContextProvider;\nexport default CartContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartContextProvider\");","map":{"version":3,"names":["React","useReducer","calcTotalPrice","calcSubPrice","calcDiscount","totalCount","calcDisc","cartContext","createContext","INIT_STATE","cart","cartLength","reducer","state","action","type","payload","products","length","CartContextProvider","children","dispatch","getCart","JSON","parse","localStorage","getItem","totalPrice","cartDiscount","setItem","stringify","addProductToCart","product","newProduct","item","subPrice","price","discount","Math","ceil","count","isProductInCart","some","color","id","filter","push","checkItemInCart","isProdInCart","exist","obj","getColors","array","deleteFromCart","index","findIndex","splice","changeProductCount","map","deleteAll","removeItem"],"sources":["/Users/makhabatabdisattarova/Desktop/ZEON IT HUB/main-project/src/context/CartContext.js"],"sourcesContent":["import React, { useReducer } from \"react\";\nimport {\n  calcTotalPrice,\n  calcSubPrice,\n  calcDiscount,\n  totalCount,\n  calcDisc,\n} from \"../components/helpers/calcPrice\";\n\nexport const cartContext = React.createContext();\n\nconst INIT_STATE = {\n  cart: {},\n  cartLength: 0,\n};\n\nconst reducer = (state = INIT_STATE, action) => {\n  switch (action.type) {\n    case \"GET_CART\":\n      return {\n        ...state,\n        cart: action.payload,\n        cartLength: action.payload.products.length,\n      };\n    default:\n      return state;\n  }\n};\n\nconst CartContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, INIT_STATE);\n  function getCart() {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0,\n        totalCount: 0,\n      };\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n    cart.totalPrice = calcTotalPrice(cart.products);\n    cart.cartDiscount = calcDiscount(cart.products);\n    dispatch({\n      type: \"GET_CART\",\n      payload: cart,\n    });\n  }\n  function addProductToCart(product) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0,\n      };\n    }\n    let newProduct = {\n      item: product,\n      subPrice: product.price,\n      discount: Math.ceil(\n        product.price -\n          (product.price - (product.price * product.discount) / 100)\n      ),\n      count: 1,\n    };\n    let isProductInCart = cart.products.some(\n      (item) => item.item.color == product.color && item.item.id == product.id\n    );\n    if (isProductInCart) {\n      cart.products = cart.products.filter(\n        (item) => item.item.color != product.color && item.item.id != product.id\n      );\n    } else {\n      cart.products.push(newProduct);\n    }\n    cart.totalPrice = calcTotalPrice(cart.products);\n    cart.cartDiscount = calcDiscount(cart.products);\n    cart.totalCount = totalCount(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function checkItemInCart(id, color) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0,\n      };\n    }\n    let isProductInCart = cart.products.some(\n      (item) => item.item.id == id && item.item.color == color\n    );\n    return isProductInCart;\n  }\n\n  const isProdInCart = (id, color) => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0,\n      };\n    }\n    let exist = cart.products.some((obj) => {\n      return obj.item.id === id && obj.item.color === color;\n    });\n    return exist;\n  };\n\n  function getColors(id, color) {\n    let array = []\n    cart.products.some\n  }\n\n  function deleteFromCart(id, color) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        products: [],\n        totalPrice: 0,\n        cartDiscount: 0,\n      };\n    }\n    const index = cart.products.findIndex(\n      (item) => item.item.id === id && item.item.color === color\n    );\n    cart.products.splice(index, 1);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function changeProductCount(count, color, id) {\n    if (count <= 0) {\n      count = 1;\n    }\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    cart.products = cart.products.map((item) => {\n      if (item.item.color === color && item.item.id === id) {\n        item.count = count;\n        item.discount = calcDisc(item);\n        item.subPrice = calcSubPrice(item);\n      }\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart.products);\n    cart.cartDiscount = calcDiscount(cart.products);\n    cart.totalCount = totalCount(cart.products);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    getCart();\n  }\n\n  function deleteAll() {\n    localStorage.removeItem(\"cart\");\n  }\n\n  return (\n    <cartContext.Provider\n      value={{\n        cartLength: state.cartLength,\n        cart: state.cart,\n        getCart,\n        addProductToCart,\n        checkItemInCart,\n        deleteFromCart,\n        changeProductCount,\n        deleteAll,\n        isProdInCart,\n      }}\n    >\n      {children}\n    </cartContext.Provider>\n  );\n};\nexport default CartContextProvider;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SACEC,cADF,EAEEC,YAFF,EAGEC,YAHF,EAIEC,UAJF,EAKEC,QALF,QAMO,iCANP;;AAQA,OAAO,MAAMC,WAAW,gBAAGP,KAAK,CAACQ,aAAN,EAApB;AAEP,MAAMC,UAAU,GAAG;EACjBC,IAAI,EAAE,EADW;EAEjBC,UAAU,EAAE;AAFK,CAAnB;;AAKA,MAAMC,OAAO,GAAG,YAAgC;EAAA,IAA/BC,KAA+B,uEAAvBJ,UAAuB;EAAA,IAAXK,MAAW;;EAC9C,QAAQA,MAAM,CAACC,IAAf;IACE,KAAK,UAAL;MACE,OAAO,EACL,GAAGF,KADE;QAELH,IAAI,EAAEI,MAAM,CAACE,OAFR;QAGLL,UAAU,EAAEG,MAAM,CAACE,OAAP,CAAeC,QAAf,CAAwBC;MAH/B,CAAP;;IAKF;MACE,OAAOL,KAAP;EARJ;AAUD,CAXD;;AAaA,MAAMM,mBAAmB,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAC5C,MAAM,CAACP,KAAD,EAAQQ,QAAR,IAAoBpB,UAAU,CAACW,OAAD,EAAUH,UAAV,CAApC;;EACA,SAASa,OAAT,GAAmB;IACjB,IAAIZ,IAAI,GAAGa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;;IACA,IAAI,CAAChB,IAAL,EAAW;MACTA,IAAI,GAAG;QACLO,QAAQ,EAAE,EADL;QAELU,UAAU,EAAE,CAFP;QAGLC,YAAY,EAAE,CAHT;QAILvB,UAAU,EAAE;MAJP,CAAP;MAMAoB,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACO,SAAL,CAAepB,IAAf,CAA7B;IACD;;IACDA,IAAI,CAACiB,UAAL,GAAkBzB,cAAc,CAACQ,IAAI,CAACO,QAAN,CAAhC;IACAP,IAAI,CAACkB,YAAL,GAAoBxB,YAAY,CAACM,IAAI,CAACO,QAAN,CAAhC;IACAI,QAAQ,CAAC;MACPN,IAAI,EAAE,UADC;MAEPC,OAAO,EAAEN;IAFF,CAAD,CAAR;EAID;;EACD,SAASqB,gBAAT,CAA0BC,OAA1B,EAAmC;IACjC,IAAItB,IAAI,GAAGa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;;IACA,IAAI,CAAChB,IAAL,EAAW;MACTA,IAAI,GAAG;QACLO,QAAQ,EAAE,EADL;QAELU,UAAU,EAAE,CAFP;QAGLC,YAAY,EAAE;MAHT,CAAP;IAKD;;IACD,IAAIK,UAAU,GAAG;MACfC,IAAI,EAAEF,OADS;MAEfG,QAAQ,EAAEH,OAAO,CAACI,KAFH;MAGfC,QAAQ,EAAEC,IAAI,CAACC,IAAL,CACRP,OAAO,CAACI,KAAR,IACGJ,OAAO,CAACI,KAAR,GAAiBJ,OAAO,CAACI,KAAR,GAAgBJ,OAAO,CAACK,QAAzB,GAAqC,GADxD,CADQ,CAHK;MAOfG,KAAK,EAAE;IAPQ,CAAjB;IASA,IAAIC,eAAe,GAAG/B,IAAI,CAACO,QAAL,CAAcyB,IAAd,CACnBR,IAAD,IAAUA,IAAI,CAACA,IAAL,CAAUS,KAAV,IAAmBX,OAAO,CAACW,KAA3B,IAAoCT,IAAI,CAACA,IAAL,CAAUU,EAAV,IAAgBZ,OAAO,CAACY,EADlD,CAAtB;;IAGA,IAAIH,eAAJ,EAAqB;MACnB/B,IAAI,CAACO,QAAL,GAAgBP,IAAI,CAACO,QAAL,CAAc4B,MAAd,CACbX,IAAD,IAAUA,IAAI,CAACA,IAAL,CAAUS,KAAV,IAAmBX,OAAO,CAACW,KAA3B,IAAoCT,IAAI,CAACA,IAAL,CAAUU,EAAV,IAAgBZ,OAAO,CAACY,EADxD,CAAhB;IAGD,CAJD,MAIO;MACLlC,IAAI,CAACO,QAAL,CAAc6B,IAAd,CAAmBb,UAAnB;IACD;;IACDvB,IAAI,CAACiB,UAAL,GAAkBzB,cAAc,CAACQ,IAAI,CAACO,QAAN,CAAhC;IACAP,IAAI,CAACkB,YAAL,GAAoBxB,YAAY,CAACM,IAAI,CAACO,QAAN,CAAhC;IACAP,IAAI,CAACL,UAAL,GAAkBA,UAAU,CAACK,IAAI,CAACO,QAAN,CAA5B;IACAQ,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACO,SAAL,CAAepB,IAAf,CAA7B;IACAY,OAAO;EACR;;EAED,SAASyB,eAAT,CAAyBH,EAAzB,EAA6BD,KAA7B,EAAoC;IAClC,IAAIjC,IAAI,GAAGa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;;IACA,IAAI,CAAChB,IAAL,EAAW;MACTA,IAAI,GAAG;QACLO,QAAQ,EAAE,EADL;QAELU,UAAU,EAAE,CAFP;QAGLC,YAAY,EAAE;MAHT,CAAP;IAKD;;IACD,IAAIa,eAAe,GAAG/B,IAAI,CAACO,QAAL,CAAcyB,IAAd,CACnBR,IAAD,IAAUA,IAAI,CAACA,IAAL,CAAUU,EAAV,IAAgBA,EAAhB,IAAsBV,IAAI,CAACA,IAAL,CAAUS,KAAV,IAAmBA,KAD/B,CAAtB;IAGA,OAAOF,eAAP;EACD;;EAED,MAAMO,YAAY,GAAG,CAACJ,EAAD,EAAKD,KAAL,KAAe;IAClC,IAAIjC,IAAI,GAAGa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;;IACA,IAAI,CAAChB,IAAL,EAAW;MACTA,IAAI,GAAG;QACLO,QAAQ,EAAE,EADL;QAELU,UAAU,EAAE,CAFP;QAGLC,YAAY,EAAE;MAHT,CAAP;IAKD;;IACD,IAAIqB,KAAK,GAAGvC,IAAI,CAACO,QAAL,CAAcyB,IAAd,CAAoBQ,GAAD,IAAS;MACtC,OAAOA,GAAG,CAAChB,IAAJ,CAASU,EAAT,KAAgBA,EAAhB,IAAsBM,GAAG,CAAChB,IAAJ,CAASS,KAAT,KAAmBA,KAAhD;IACD,CAFW,CAAZ;IAGA,OAAOM,KAAP;EACD,CAbD;;EAeA,SAASE,SAAT,CAAmBP,EAAnB,EAAuBD,KAAvB,EAA8B;IAC5B,IAAIS,KAAK,GAAG,EAAZ;IACA1C,IAAI,CAACO,QAAL,CAAcyB,IAAd;EACD;;EAED,SAASW,cAAT,CAAwBT,EAAxB,EAA4BD,KAA5B,EAAmC;IACjC,IAAIjC,IAAI,GAAGa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;;IACA,IAAI,CAAChB,IAAL,EAAW;MACTA,IAAI,GAAG;QACLO,QAAQ,EAAE,EADL;QAELU,UAAU,EAAE,CAFP;QAGLC,YAAY,EAAE;MAHT,CAAP;IAKD;;IACD,MAAM0B,KAAK,GAAG5C,IAAI,CAACO,QAAL,CAAcsC,SAAd,CACXrB,IAAD,IAAUA,IAAI,CAACA,IAAL,CAAUU,EAAV,KAAiBA,EAAjB,IAAuBV,IAAI,CAACA,IAAL,CAAUS,KAAV,KAAoBA,KADzC,CAAd;IAGAjC,IAAI,CAACO,QAAL,CAAcuC,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;IACA7B,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACO,SAAL,CAAepB,IAAf,CAA7B;IACAY,OAAO;EACR;;EAED,SAASmC,kBAAT,CAA4BjB,KAA5B,EAAmCG,KAAnC,EAA0CC,EAA1C,EAA8C;IAC5C,IAAIJ,KAAK,IAAI,CAAb,EAAgB;MACdA,KAAK,GAAG,CAAR;IACD;;IACD,IAAI9B,IAAI,GAAGa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;IACAhB,IAAI,CAACO,QAAL,GAAgBP,IAAI,CAACO,QAAL,CAAcyC,GAAd,CAAmBxB,IAAD,IAAU;MAC1C,IAAIA,IAAI,CAACA,IAAL,CAAUS,KAAV,KAAoBA,KAApB,IAA6BT,IAAI,CAACA,IAAL,CAAUU,EAAV,KAAiBA,EAAlD,EAAsD;QACpDV,IAAI,CAACM,KAAL,GAAaA,KAAb;QACAN,IAAI,CAACG,QAAL,GAAgB/B,QAAQ,CAAC4B,IAAD,CAAxB;QACAA,IAAI,CAACC,QAAL,GAAgBhC,YAAY,CAAC+B,IAAD,CAA5B;MACD;;MACD,OAAOA,IAAP;IACD,CAPe,CAAhB;IAQAxB,IAAI,CAACiB,UAAL,GAAkBzB,cAAc,CAACQ,IAAI,CAACO,QAAN,CAAhC;IACAP,IAAI,CAACkB,YAAL,GAAoBxB,YAAY,CAACM,IAAI,CAACO,QAAN,CAAhC;IACAP,IAAI,CAACL,UAAL,GAAkBA,UAAU,CAACK,IAAI,CAACO,QAAN,CAA5B;IACAQ,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACO,SAAL,CAAepB,IAAf,CAA7B;IACAY,OAAO;EACR;;EAED,SAASqC,SAAT,GAAqB;IACnBlC,YAAY,CAACmC,UAAb,CAAwB,MAAxB;EACD;;EAED,oBACE,QAAC,WAAD,CAAa,QAAb;IACE,KAAK,EAAE;MACLjD,UAAU,EAAEE,KAAK,CAACF,UADb;MAELD,IAAI,EAAEG,KAAK,CAACH,IAFP;MAGLY,OAHK;MAILS,gBAJK;MAKLgB,eALK;MAMLM,cANK;MAOLI,kBAPK;MAQLE,SARK;MASLX;IATK,CADT;IAAA,UAaG5B;EAbH;IAAA;IAAA;IAAA;EAAA,QADF;AAiBD,CApJD;;GAAMD,mB;;KAAAA,mB;AAqJN,eAAeA,mBAAf"},"metadata":{},"sourceType":"module"}